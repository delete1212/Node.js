<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
    <link href="\main.css" rel="styleSheet">
</head>
    
    <body class="grey-bg">

      <%- include('nav.ejs')%>

        <div class="white-bg">
          <% for (let i = 0; i < posts.length; i++){ %>
          <div class="list-box">
            <h4><a href="/detail/<%= posts[i]._id %>"><%= posts[i].title %></a></h4>
            <p><%= posts[i].content %></p>
            <a href="/edit/<%= posts[i]._id %>">‚úèÔ∏è</a>
            <span class="delete" data-id="<%= posts[i]._id %>">üóëÔ∏è</span>
          </div>
          <% } %>
        </div> 

        <script>
          const docu = document.querySelectorAll('.delete');
          for (var i = 0; i < docu.length; i++){
          docu[i].addEventListener('click', function(e){
            fetch('/delete?docid=' + e.target.dataset.id, {
              method : 'Delete',
            })
          })
          }
        </script>
      </body>

</html>